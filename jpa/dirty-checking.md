# Dirty Checking
- JPA에서는 트랜잭션이 끝나는 시점에 최종 조회 상태와 비교시 변화가 있는 모든 엔티티 객체를 데이터베이스에 자동으로 반영해줌
- JPA에서는 엔티티를 조회하면 해당 엔티티의 조회 상태 그대로 스냅샷을 만들어 놓음
- 트랜잭션이 끝나는 시점에는 이 스냅샷과 비교해서 다른점이 있다면 Update Query를 데이터베이스로 전달
- 상태 변경 검사의 대상은 영속성 컨텍스트가 관리하는 엔티티에만 적용
- 준영속/비영속 상태의 엔티티는 Dirty Checking 대상에 포함되지 않음
  - detach된 엔티티 (준영속)
  - DB에 반영되기 전 처음 생성된 엔티티 (비영속)


- Dirty Checking으로 생성되는 update 쿼리는 기본적으로 모든 필드를 업데이트
- JPA에서는 전체 필드를 업데이트하는 방식을 기본값으로 사용
  - 전체 필드를 업데이트하는 방식의 장점
    1) 생성되는 쿼리가 같아 부트 실행시점에 미리 만들어서 재사용 가능
    2) 데이터베이스 입장에서 쿼리 재사용이 가능
    3) 동일한 쿼리를 받으면 이전에 파싱된 쿼리를 재사용
- @DynamicUpdate로 변경 필드만 반영되도록 할 수 있음